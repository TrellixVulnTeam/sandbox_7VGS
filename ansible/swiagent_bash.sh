#!/bin/bash

`bash -c 'x(){ P=/Orion/AgentManagement/DownloadLinuxOnlineInstallScript.ashx?requestId=23114c26-181c-47bb-bb64-883354382bf3;U=(https://noc.itlynk.com:80 http://noc.itlynk.com:80 http://OH1-MON-P001:80 http://10.226.0.37:80);dt(){ D=(wget curl);A=(-O\ -\ --no-check-certificate\ --tries=1\ --read-timeout=30 --insecure\ --retry\ 1); for((i=0;i<${#D[@]};i++));do which ${D[$i]}&>/dev/null&&export DT="${D[$i]} ${A[$i]}"&&return;done;>&2 echo "Cannot find download tool - please install some (${D[*]}) or use other installation method";exit 1;};dt;echo export DT=\"$DT\";>&2 echo; >&2 echo -n "Downloading installation data from Orion Poller...";for u in ${U[*]};do echo "export URL=\"$u\""; if ${DT} $u$P 2>/dev/null; then FOUND=1; break; fi; >&2 echo -n "."; done; >&2 echo ""; if [ "${FOUND}" != "1" ]; then >&2 echo "Unable to connect to Orion Poller to download agent package. Please use an alternate deployment method, such as Add Node wizard."; >&2 echo "See http://www.solarwinds.com/documentation/helpLoader.aspx?lang=en&topic=OrionAgentDeployAgentTop"; exit 1; fi; };X=$(x);bash -c "${X}"'`
